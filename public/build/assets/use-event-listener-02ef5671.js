import{r as f}from"./app-22fcf5ab.js";import{h as w,F as E}from"./hidden-ec1212db.js";import{s as v}from"./use-flags-3a807b7a.js";import{e as p}from"./keyboard-c6e9c070.js";function m(e,t,r){let o=v(t);f.useEffect(()=>{function c(u){o.current(u)}return document.addEventListener(e,c,r),()=>document.removeEventListener(e,c,r)},[e,r])}function b(e,t,r=!0){let o=f.useRef(!1);f.useEffect(()=>{requestAnimationFrame(()=>{o.current=r})},[r]);function c(n,a){if(!o.current||n.defaultPrevented)return;let d=function s(i){return typeof i=="function"?s(i()):Array.isArray(i)||i instanceof Set?i:[i]}(e),l=a(n);if(l!==null&&l.getRootNode().contains(l)){for(let s of d){if(s===null)continue;let i=s instanceof HTMLElement?s:s.current;if(i!=null&&i.contains(l)||n.composed&&n.composedPath().includes(i))return}return!w(l,E.Loose)&&l.tabIndex!==-1&&n.preventDefault(),t(n,l)}}let u=f.useRef(null);m("mousedown",n=>{var a,d;o.current&&(u.current=((d=(a=n.composedPath)==null?void 0:a.call(n))==null?void 0:d[0])||n.target)},!0),m("click",n=>{u.current&&(c(n,()=>u.current),u.current=null)},!0),m("blur",n=>c(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function L(e,t,r){let o=v(t);f.useEffect(()=>{function c(u){o.current(u)}return window.addEventListener(e,c,r),()=>window.removeEventListener(e,c,r)},[e,r])}var y=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(y||{});function x(){let e=f.useRef(0);return L("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function A(...e){return f.useMemo(()=>p(...e),[...e])}function M(e,t,r,o){let c=v(r);f.useEffect(()=>{e=e??window;function u(n){c.current(n)}return e.addEventListener(t,u,o),()=>e.removeEventListener(t,u,o)},[e,t,o])}export{M as E,b as L,x as a,A as n,y as s};
