import{r as s,W as y,j as r,a as e,g as F}from"./app-22fcf5ab.js";import{u as S,a as b,C as h}from"./react-stripe.esm-8c25f7d4.js";import{P as I}from"./PrimaryButton-94fd7c30.js";import{f as D}from"./helpers-9e61808a.js";import{I as i}from"./InputLabel-5e1d4528.js";import{T as g}from"./TextInput-1407a83b.js";import{F as P}from"./FormGrid-a889cc39.js";import{I as C}from"./InputError-34061e86.js";import{a as T}from"./CheckoutProvider-dbb63cec.js";import"./bootstrap-74cea6cc.js";import"./Spinner-19cd8a22.js";function G(){const{userForm:a}=s.useContext(T),m=S(),l=b(),{total:v,errors:E}=y().props,[d,c]=s.useState({name:a.data.name,email:a.data.email}),[u,n]=s.useState(!1),[p,f]=s.useState(null),N=async t=>{t.preventDefault(),!(!m||!l)&&(f(null),n(!0),await m.createPaymentMethod("card",l.getElement(h),{billing_details:{name:a.data.name,email:a.data.email,phone:a.data.phone}}).then(function(o){F.visit(route("purchase"),{method:"post",preserveScroll:!0,preserveState:!0,data:{...a.data,paymentMethodId:o.paymentMethod.id},onFinish:j=>{n(!1)}})}).catch(function(o){n(!1),f(o.message)}))},x={style:{base:{fontWeight:"500",fontFamily:"Inter, sans-serif",fontSize:"16px",fontSmoothing:"antialiased"},invalid:{iconColor:"#FFC7EE",color:"#FFC7EE"}}};return r(P,{children:[r("div",{className:"sm:col-span-6",children:[e(i,{children:"Nombre"}),e(g,{name:"cardData",required:!0,onChange:t=>c(t.target.value),className:"w-full",value:d.name})]}),r("div",{className:"sm:col-span-6",children:[e(i,{children:"Email"}),e(g,{name:"cardData",required:!0,onChange:t=>c(t.target.value),className:"w-full",value:d.email})]}),r("div",{className:"sm:col-span-6",children:[e(i,{htmlFor:"card-element",children:"Targeta de credito"}),e("div",{className:" py-2.5 px-3 rounded-md "+(p?"ring-inset ring-2 ring-red-500":"border"),children:e(h,{id:"card-element",options:x})}),e("span",{className:"text-sm text-gray-400 mt-1 block",children:"ej: 4242424242424242 "}),e(C,{message:p,className:"mt-2"}),e(C,{message:E.card,className:"mt-2"})]}),e("div",{className:"sm:col-span-6",children:r(I,{className:"w-full mt-4",onClick:N,isLoading:u,disabled:u,children:["Pagar ",D(v.total)]})})]})}export{G as default};
