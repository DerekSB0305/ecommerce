import{r as i,R as b}from"./app-22fcf5ab.js";import{l as _,u as x,a as J,p as Y,s as L,j as fe,L as K,y as Z,w as R,b as ee,c as ve,o as y,d as pe,e as me,D as re}from"./use-flags-3a807b7a.js";let Q=i.createContext(null);Q.displayName="OpenClosedContext";var T=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(T||{});function te(){return i.useContext(Q)}function he({value:e,children:r}){return b.createElement(Q.Provider,{value:e},r)}function ne(){let e=i.useRef(!1);return _(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ge(e){let r={called:!1};return(...n)=>{if(!r.called)return r.called=!0,e(...n)}}function z(e,...r){e&&r.length>0&&e.classList.add(...r)}function G(e,...r){e&&r.length>0&&e.classList.remove(...r)}function be(e,r){let n=J();if(!e)return n.dispose;let{transitionDuration:l,transitionDelay:f}=getComputedStyle(e),[h,v]=[l,f].map(u=>{let[a=0]=u.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,g)=>g-o);return a}),c=h+v;if(c!==0){n.group(a=>{a.setTimeout(()=>{r(),a.dispose()},c),a.addEventListener(e,"transitionrun",o=>{o.target===o.currentTarget&&a.dispose()})});let u=n.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(r(),u())})}else r();return n.add(()=>r()),n.dispose}function Ee(e,r,n,l){let f=n?"enter":"leave",h=J(),v=l!==void 0?ge(l):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=x(f,{enter:()=>r.enter,leave:()=>r.leave}),u=x(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),a=x(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return G(e,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),z(e,...c,...a),h.nextFrame(()=>{G(e,...a),z(e,...u),be(e,()=>(G(e,...c),z(e,...r.entered),v()))}),h.dispose}function Te({container:e,direction:r,classes:n,onStart:l,onStop:f}){let h=ne(),v=Y(),c=L(r);_(()=>{let u=J();v.add(u.dispose);let a=e.current;if(a&&c.current!=="idle"&&h.current)return u.dispose(),l.current(c.current),u.add(Ee(a,n.current,c.current==="enter",()=>{u.dispose(),f.current(c.current)})),u.dispose},[r])}function $(e=""){return e.split(" ").filter(r=>r.trim().length>1)}let H=i.createContext(null);H.displayName="TransitionContext";var Ce=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ce||{});function Fe(){let e=i.useContext(H);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function we(){let e=i.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=i.createContext(null);A.displayName="NestingContext";function M(e){return"children"in e?M(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function ie(e,r){let n=L(e),l=i.useRef([]),f=ne(),h=Y(),v=y((d,t=R.Hidden)=>{let p=l.current.findIndex(({el:s})=>s===d);p!==-1&&(x(t,{[R.Unmount](){l.current.splice(p,1)},[R.Hidden](){l.current[p].state="hidden"}}),h.microTask(()=>{var s;!M(l)&&f.current&&((s=n.current)==null||s.call(n))}))}),c=y(d=>{let t=l.current.find(({el:p})=>p===d);return t?t.state!=="visible"&&(t.state="visible"):l.current.push({el:d,state:"visible"}),()=>v(d,R.Unmount)}),u=i.useRef([]),a=i.useRef(Promise.resolve()),o=i.useRef({enter:[],leave:[],idle:[]}),g=y((d,t,p)=>{u.current.splice(0),r&&(r.chains.current[t]=r.chains.current[t].filter(([s])=>s!==d)),r==null||r.chains.current[t].push([d,new Promise(s=>{u.current.push(s)})]),r==null||r.chains.current[t].push([d,new Promise(s=>{Promise.all(o.current[t].map(([m,E])=>E)).then(()=>s())})]),t==="enter"?a.current=a.current.then(()=>r==null?void 0:r.wait.current).then(()=>p(t)):p(t)}),C=y((d,t,p)=>{Promise.all(o.current[t].splice(0).map(([s,m])=>m)).then(()=>{var s;(s=u.current.shift())==null||s()}).then(()=>p(t))});return i.useMemo(()=>({children:l,register:c,unregister:v,onStart:g,onStop:C,wait:a,chains:o}),[c,v,l,g,C,o,a])}function xe(){}let Re=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function X(e){var r;let n={};for(let l of Re)n[l]=(r=e[l])!=null?r:xe;return n}function $e(e){let r=i.useRef(X(e));return i.useEffect(()=>{r.current=X(e)},[e]),r}let ye="div",le=fe.RenderStrategy;function Se(e,r){let{beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:h,enter:v,enterFrom:c,enterTo:u,entered:a,leave:o,leaveFrom:g,leaveTo:C,...d}=e,t=i.useRef(null),p=Z(t,r),s=d.unmount?R.Unmount:R.Hidden,{show:m,appear:E,initial:se}=Fe(),[F,U]=i.useState(m?"visible":"hidden"),W=we(),{register:P,unregister:O}=W,j=i.useRef(null);i.useEffect(()=>P(t),[P,t]),i.useEffect(()=>{if(s===R.Hidden&&t.current){if(m&&F!=="visible"){U("visible");return}return x(F,{hidden:()=>O(t),visible:()=>P(t)})}},[F,t,P,O,m,s]);let B=L({enter:$(v),enterFrom:$(c),enterTo:$(u),entered:$(a),leave:$(o),leaveFrom:$(g),leaveTo:$(C)}),N=$e({beforeEnter:n,afterEnter:l,beforeLeave:f,afterLeave:h}),k=ee();i.useEffect(()=>{if(k&&F==="visible"&&t.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[t,F,k]);let I=se&&!E,ue=(()=>!k||I||j.current===m?"idle":m?"enter":"leave")(),S=ve(0),oe=y(w=>x(w,{enter:()=>{S.addFlag(T.Opening),N.current.beforeEnter()},leave:()=>{S.addFlag(T.Closing),N.current.beforeLeave()},idle:()=>{}})),ce=y(w=>x(w,{enter:()=>{S.removeFlag(T.Opening),N.current.afterEnter()},leave:()=>{S.removeFlag(T.Closing),N.current.afterLeave()},idle:()=>{}})),D=ie(()=>{U("hidden"),O(t)},W);Te({container:t,classes:B,direction:ue,onStart:L(w=>{D.onStart(t,w,oe)}),onStop:L(w=>{D.onStop(t,w,ce),w==="leave"&&!M(D)&&(U("hidden"),O(t))})}),i.useEffect(()=>{I&&(s===R.Hidden?j.current=null:j.current=m)},[m,I,F]);let q=d,de={ref:p};return E&&m&&pe.isServer&&(q={...q,className:me(d.className,...B.current.enter,...B.current.enterFrom)}),b.createElement(A.Provider,{value:D},b.createElement(he,{value:x(F,{visible:T.Open,hidden:T.Closed})|S.flags},re({ourProps:de,theirProps:q,defaultTag:ye,features:le,visible:F==="visible",name:"Transition.Child"})))}function Le(e,r){let{show:n,appear:l=!1,unmount:f,...h}=e,v=i.useRef(null),c=Z(v,r);ee();let u=te();if(n===void 0&&u!==null&&(n=(u&T.Open)===T.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,o]=i.useState(n?"visible":"hidden"),g=ie(()=>{o("hidden")}),[C,d]=i.useState(!0),t=i.useRef([n]);_(()=>{C!==!1&&t.current[t.current.length-1]!==n&&(t.current.push(n),d(!1))},[t,n]);let p=i.useMemo(()=>({show:n,appear:l,initial:C}),[n,l,C]);i.useEffect(()=>{if(n)o("visible");else if(!M(g))o("hidden");else{let m=v.current;if(!m)return;let E=m.getBoundingClientRect();E.x===0&&E.y===0&&E.width===0&&E.height===0&&o("hidden")}},[n,g]);let s={unmount:f};return b.createElement(A.Provider,{value:g},b.createElement(H.Provider,{value:p},re({ourProps:{...s,as:i.Fragment,children:b.createElement(ae,{ref:c,...s,...h})},theirProps:{},defaultTag:i.Fragment,features:le,visible:a==="visible",name:"Transition"})))}function Pe(e,r){let n=i.useContext(H)!==null,l=te()!==null;return b.createElement(b.Fragment,null,!n&&l?b.createElement(V,{ref:r,...e}):b.createElement(ae,{ref:r,...e}))}let V=K(Le),ae=K(Se),Oe=K(Pe),He=Object.assign(V,{Child:Oe,Root:V});export{te as C,he as c,T as d,ne as f,He as t};
