import{r as i,R as k,a as y,j as H,F as ve}from"./app-22fcf5ab.js";import{l as K,o as E,L as J,y as Y,D as q,p as ge,P as he,c as be,s as ye,u as Re}from"./use-flags-3a807b7a.js";import{e as te,I as z,o as C,r as Z}from"./keyboard-c6e9c070.js";import{c as Ee,p as ke,I as V,L as _,N as ee,A as xe}from"./hidden-ec1212db.js";import{b as $e,M as ne}from"./description-06037014.js";import"./bootstrap-74cea6cc.js";function Ne({container:e,accept:t,walk:r,enabled:n=!0}){let s=i.useRef(t),o=i.useRef(r);i.useEffect(()=>{s.current=t,o.current=r},[t,r]),K(()=>{if(!e||!n)return;let l=te(e);if(!l)return;let c=s.current,u=o.current,h=Object.assign(R=>c(R),{acceptNode:c}),w=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,h,!1);for(;w.nextNode();)u(w.currentNode)},[e,n,s,o])}function oe(e={},t=null,r=[]){for(let[n,s]of Object.entries(e))ie(r,ae(t,n),s);return r}function ae(e,t){return e?e+"["+t+"]":t}function ie(e,t,r){if(Array.isArray(r))for(let[n,s]of r.entries())ie(e,ae(t,n.toString()),s);else r instanceof Date?e.push([t,r.toISOString()]):typeof r=="boolean"?e.push([t,r?"1":"0"]):typeof r=="string"?e.push([t,r]):typeof r=="number"?e.push([t,`${r}`]):r==null?e.push([t,""]):oe(r,t,e)}function Te(e){var t;let r=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(r){for(let n of r.elements)if(n.tagName==="INPUT"&&n.type==="submit"||n.tagName==="BUTTON"&&n.type==="submit"||n.nodeName==="INPUT"&&n.type==="image"){n.click();return}}}function we(e,t,r){let[n,s]=i.useState(r),o=e!==void 0,l=i.useRef(o),c=i.useRef(!1),u=i.useRef(!1);return o&&!l.current&&!c.current?(c.current=!0,l.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&l.current&&!u.current&&(u.current=!0,l.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?e:n,E(h=>(o||s(h),t==null?void 0:t(h)))]}let le=i.createContext(null);function se(){let e=i.useContext(le);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,se),t}return e}function ue(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(r){let n=E(o=>(t(l=>[...l,o]),()=>t(l=>{let c=l.slice(),u=c.indexOf(o);return u!==-1&&c.splice(u,1),c}))),s=i.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return k.createElement(le.Provider,{value:s},r.children)},[t])]}let Ce="label";function Ae(e,t){let r=z(),{id:n=`headlessui-label-${r}`,passive:s=!1,...o}=e,l=se(),c=Y(t);K(()=>l.register(n),[n,l.register]);let u={ref:c,...l.props,id:n};return s&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in o&&delete o.onClick),q({ourProps:u,theirProps:o,slot:l.slot||{},defaultTag:Ce,name:l.name||"Label"})}let Oe=J(Ae),Le=Object.assign(Oe,{});var Se=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(Se||{});let Fe={0(e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:xe(r,n=>n.element.current)}},1(e,t){let r=e.options.slice(),n=e.options.findIndex(s=>s.id===t.id);return n===-1?e:(r.splice(n,1),{...e,options:r})}},Q=i.createContext(null);Q.displayName="RadioGroupDataContext";function ce(e){let t=i.useContext(Q);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ce),r}return t}let X=i.createContext(null);X.displayName="RadioGroupActionsContext";function de(e){let t=i.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,de),r}return t}function Pe(e,t){return Re(t.type,Fe,e,t)}let De="div";function Ge(e,t){let r=z(),{id:n=`headlessui-radiogroup-${r}`,value:s,defaultValue:o,name:l,onChange:c,by:u=(a,f)=>a===f,disabled:h=!1,...w}=e,R=E(typeof u=="string"?(a,f)=>{let p=u;return(a==null?void 0:a[p])===(f==null?void 0:f[p])}:u),[A,L]=i.useReducer(Pe,{options:[]}),m=A.options,[j,S]=ue(),[U,x]=ne(),$=i.useRef(null),W=Y($,t),[g,F]=we(s,c,o),P=i.useMemo(()=>m.find(a=>!a.propsRef.current.disabled),[m]),b=i.useMemo(()=>m.some(a=>R(a.propsRef.current.value,g)),[m,g]),v=E(a=>{var f;if(h||R(a,g))return!1;let p=(f=m.find(T=>R(T.propsRef.current.value,a)))==null?void 0:f.propsRef.current;return p!=null&&p.disabled?!1:(F==null||F(a),!0)});Ne({container:$.current,accept(a){return a.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let B=E(a=>{let f=$.current;if(!f)return;let p=te(f),T=m.filter(d=>d.propsRef.current.disabled===!1).map(d=>d.element.current);switch(a.key){case C.Enter:Te(a.currentTarget);break;case C.ArrowLeft:case C.ArrowUp:if(a.preventDefault(),a.stopPropagation(),V(T,_.Previous|_.WrapAround)===ee.Success){let d=m.find(O=>O.element.current===(p==null?void 0:p.activeElement));d&&v(d.propsRef.current.value)}break;case C.ArrowRight:case C.ArrowDown:if(a.preventDefault(),a.stopPropagation(),V(T,_.Next|_.WrapAround)===ee.Success){let d=m.find(O=>O.element.current===(p==null?void 0:p.activeElement));d&&v(d.propsRef.current.value)}break;case C.Space:{a.preventDefault(),a.stopPropagation();let d=m.find(O=>O.element.current===(p==null?void 0:p.activeElement));d&&v(d.propsRef.current.value)}break}}),D=E(a=>(L({type:0,...a}),()=>L({type:1,id:a.id}))),N=i.useMemo(()=>({value:g,firstOption:P,containsCheckedOption:b,disabled:h,compare:R,...A}),[g,P,b,h,R,A]),G=i.useMemo(()=>({registerOption:D,change:v}),[D,v]),pe={ref:W,id:n,role:"radiogroup","aria-labelledby":j,"aria-describedby":U,onKeyDown:B},fe=i.useMemo(()=>({value:g}),[g]),I=i.useRef(null),me=ge();return i.useEffect(()=>{I.current&&o!==void 0&&me.addEventListener(I.current,"reset",()=>{v(o)})},[I,v]),k.createElement(x,{name:"RadioGroup.Description"},k.createElement(S,{name:"RadioGroup.Label"},k.createElement(X.Provider,{value:G},k.createElement(Q.Provider,{value:N},l!=null&&g!=null&&oe({[l]:g}).map(([a,f],p)=>k.createElement(Ee,{features:ke.Hidden,ref:p===0?T=>{var d;I.current=(d=T==null?void 0:T.closest("form"))!=null?d:null}:void 0,...he({key:a,as:"input",type:"radio",checked:f!=null,hidden:!0,readOnly:!0,name:a,value:f})})),q({ourProps:pe,theirProps:w,slot:fe,defaultTag:De,name:"RadioGroup"})))))}var Ie=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(Ie||{});let _e="div";function Me(e,t){var r;let n=z(),{id:s=`headlessui-radiogroup-option-${n}`,value:o,disabled:l=!1,...c}=e,u=i.useRef(null),h=Y(u,t),[w,R]=ue(),[A,L]=ne(),{addFlag:m,removeFlag:j,hasFlag:S}=be(1),U=ye({value:o,disabled:l}),x=ce("RadioGroup.Option"),$=de("RadioGroup.Option");K(()=>$.registerOption({id:s,element:u,propsRef:U}),[s,$,u,e]);let W=E(N=>{var G;if(Z(N.currentTarget))return N.preventDefault();$.change(o)&&(m(2),(G=u.current)==null||G.focus())}),g=E(N=>{if(Z(N.currentTarget))return N.preventDefault();m(2)}),F=E(()=>j(2)),P=((r=x.firstOption)==null?void 0:r.id)===s,b=x.disabled||l,v=x.compare(x.value,o),B={ref:h,id:s,role:"radio","aria-checked":v?"true":"false","aria-labelledby":w,"aria-describedby":A,"aria-disabled":b?!0:void 0,tabIndex:(()=>b?-1:v||!x.containsCheckedOption&&P?0:-1)(),onClick:b?void 0:W,onFocus:b?void 0:g,onBlur:b?void 0:F},D=i.useMemo(()=>({checked:v,disabled:b,active:S(2)}),[v,b,S]);return k.createElement(L,{name:"RadioGroup.Description"},k.createElement(R,{name:"RadioGroup.Label"},q({ourProps:B,theirProps:c,slot:D,defaultTag:_e,name:"RadioGroup.Option"})))}let je=J(Ge),Ue=J(Me),M=Object.assign(je,{Option:Ue,Label:Le,Description:$e});function re(...e){return e.filter(Boolean).join(" ")}const qe=({data:e,setData:t,attribute:r})=>{const[n,s]=i.useState(e.attributes[r.name]);return i.useEffect(()=>{t("attributes",{...e.attributes,[r.name]:n})},[n]),y("div",{children:r.attribute_values.length==1?y("span",{className:"font-medium",children:r.attribute_values[0].name}):y("div",{className:"flex flex-wrap gap-x-2",children:H(M,{value:n,onChange:s,children:[H(M.Label,{className:"sr-only",children:["Choose a ",r.name]}),y("div",{className:"grid grid-cols-4 gap-3 sm:grid-cols-8 lg:grid-cols-4",children:r.attribute_values.map(o=>y(M.Option,{value:o.name,disabled:!o.in_stock,className:({active:l})=>re(o.in_stock?"cursor-pointer bg-white text-gray-900 shadow-sm":"cursor-not-allowed bg-gray-50 text-gray-200",l?"ring-2 ring-primary-500":"","group relative flex items-center justify-center rounded-md border py-2.5 px-4 text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 sm:py-2"),children:({active:l,checked:c})=>H(ve,{children:[y(M.Label,{as:"span",children:o.name}),o.in_stock?y("span",{className:re(l?"border":"border-2",c?"border-primary-500":"border-transparent","pointer-events-none absolute -inset-px rounded-md"),"aria-hidden":"true"}):y("span",{"aria-hidden":"true",className:"pointer-events-none absolute -inset-px rounded-md border-2 border-gray-200",children:y("svg",{className:"absolute inset-0 h-full w-full stroke-2 text-gray-200",viewBox:"0 0 100 100",preserveAspectRatio:"none",stroke:"currentColor",children:y("line",{x1:0,y1:100,x2:100,y2:0,vectorEffect:"non-scaling-stroke"})})})]})},r.name+o.name))})]})})})};export{qe as default};
